<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>예약 조회</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    
    #wrap {
      width: 1200px;
      margin: 0 auto;
      box-sizing: border-box;
    }
    
    header {
      text-align: center;
      margin: 1.5rem 0;
    }
    header h2 {
      font-size: 2.5rem;
      font-weight: 300;
    }
    
    .nav-bar {
      background-color: peru;
    }
    .nav-bar .nav-link {
      color: #fff;
      font-weight: bold;
    }
    .nav-bar .nav-link:hover {
      text-decoration: underline;
    }
    
    .main-banner img {
      width: 100%;
      display: block;
    }
    
    .main-contents {
      display: flex;
    }
    .main-contents > .booking,
    .main-contents > .contact {
      width: 25%;
      background-color: sienna;
      color: #fff;
    }
    .main-contents > .booking .display-4,
    .main-contents > .contact h1 {
      margin: 0;
    }
    
    .main-contents > .search {
      width: 50%;
      background-color: #d2691e;
      padding: 0;
    }
    .search-form {
      width: 50%;
      margin: 0 auto;
      padding: 1.5rem 0;
    }
    .search-form h3,
    .search-form .form-label {
      color: #fff;
      white-space: nowrap;
    }
    
    .search-form .d-flex {
      flex-wrap: nowrap !important;
    }
    .search-form .form-control {
      flex: 1 1 auto;
      min-width: 0;
      width: auto !important;
    }
   
    .search-form .d-grid {
      display: flex !important;
      justify-content: flex-end;
      margin-top: .5rem;
    }
    #queryBtn {
      width: 30% !important;
    }
    
    footer {
      font-size: .75rem;
      text-align: left;
      color: #555;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div id="wrap">
    <header>
      <h2>통나무 펜션</h2>
    </header>

    <nav class="nav nav-fill nav-bar py-2 mb-4">
      <a class="nav-link" href="#">펜션소개</a>
      <a class="nav-link" href="#">객실보기</a>
      <a class="nav-link" href="#">예약하기</a>
      <a class="nav-link active" href="#">예약목록</a>
    </nav>

    <section class="contents">
      
      <div class="main-banner">
        <img src="http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner1.jpg"
             alt="펜션 전경">
      </div>

      
      <div class="main-contents">
        
        <div class="booking d-flex justify-content-center align-items-center">
          <div class="display-4">실시간<br>예약하기</div>
        </div>

       
        <div class="search">
          <div class="search-form">
            <h3 class="mb-4">예약 확인</h3>

            <div class="d-flex align-items-center mb-3 flex-nowrap">
              <label for="nameInput" class="form-label mb-0 me-2">이름</label>
              <input type="text" id="nameInput" class="form-control">
            </div>
            <div class="d-flex align-items-center mb-3 flex-nowrap">
              <label for="phoneInput" class="form-label mb-0 me-2">전화번호</label>
              <input type="tel" id="phoneInput" class="form-control">
            </div>

            <div class="d-grid">
              <button type="button" id="queryBtn" class="btn btn-success">조회하기</button>
            </div>
          </div>
        </div>

        
        <div class="contact d-flex justify-content-center align-items-center">
          <div>
            <h3 style="color:#fff;">예약문의 :</h3>
            <h1>010-<br>000-1111</h1>
          </div>
        </div>
      </div>
    </section>

    <footer>
      제주특별자치도 제주시 애월읍<br>
      사업자등록번호: 111-22-255222 / 농어촌민박사업자지정 / 대표: 김통목<br>
      Copyright 2025 tongnamu All right reserved
    </footer>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
          crossorigin="anonymous"></script>
  <script>
    $(function(){
      $("#queryBtn").click(function(){
        const name  = $("#nameInput").val().trim();
        const phone = $("#phoneInput").val().trim();
        if(!name)  return alert("이름을 입력하세요");
        if(!/^010-\d{4}-\d{4}$/.test(phone))
          return alert("전화번호를 010-1234-5678 형식으로 입력하세요");

        $.ajax({
          type: "get",
          url: "/ajax/reservation/query",
          data: { name, phoneNumber: phone },
          success(response){
            if(response.result === "success"){
              const r = response.reservation;
              alert(
                `이름: ${r.name}\n`+
                `날짜: ${r.date}\n`+
                `일수: ${r.day}\n`+
                `인원: ${r.headcount}\n`+
                `상태: ${r.state}`
              );
            } else {
              alert("조회 결과가 없습니다.");
            }
          },
          error(){
            alert("서버 오류가 발생했습니다.");
          }
        });
      });
    });
  </script>
</body>
</html>
